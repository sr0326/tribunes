function centerPop(){var t=$(".dl_popup_new").height();$(".dl_popup_new").css("marginTop",-t/2)}function throttle(a,i,s){var n,r=new Date;return function(){var t=arguments,e=new Date;clearTimeout(n),s<=e-r?(a.apply(this,t),r=e):n=setTimeout(a,i)}}!function(s){if(!document.defaultView||!document.defaultView.getComputedStyle){var n=jQuery.curCSS;jQuery.curCSS=function(t,e,a){if("background-position"===e&&(e="backgroundPosition"),"backgroundPosition"!==e||!t.currentStyle||t.currentStyle[e])return n.apply(this,arguments);var i=t.style;return!a&&i&&i[e]?i[e]:n(t,"backgroundPositionX",a)+" "+n(t,"backgroundPositionY",a)}}var e=s.fn.animate;function r(t){var e=(t=(t=(t=t.replace(/left|top/g,"0px")).replace(/right|bottom/g,"100%")).replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2")).match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);return[parseFloat(e[1],10),e[2],parseFloat(e[3],10),e[4]]}s.fn.animate=function(t){return"background-position"in t&&(t.backgroundPosition=t["background-position"],delete t["background-position"]),"backgroundPosition"in t&&(t.backgroundPosition="("+t.backgroundPosition+")"),e.apply(this,arguments)},s.fx.step.backgroundPosition=function(t){if(!t.bgPosReady){var e=s.curCSS(t.elem,"backgroundPosition");e||(e="0px 0px"),e=r(e),t.start=[e[0],e[2]];var a=r(t.end);t.end=[a[0],a[2]],t.unit=[a[1],a[3]],t.bgPosReady=!0}var i=[];i[0]=(t.end[0]-t.start[0])*t.pos+t.start[0]+t.unit[0],i[1]=(t.end[1]-t.start[1])*t.pos+t.start[1]+t.unit[1],t.elem.style.backgroundPosition=i[0]+" "+i[1]}}(jQuery),$(function(){var t,d={};d.configs={keywords:$.trim($(".keywords").val()),secDomain:"download.csdn.net",curPatetern:""},d.showData=null,d.reportPattern=function(t){d.configs.curPatetern=t;var e=new Image;e.onload=e.onerror=function(){e.onload=e.onerror=null,e=null}},d.getBaiduDataFailed=function(t){0<$(".album_detail_wrap").find(".J_search").length?d.reportPattern("search_csdn"):d.reportPattern("search_0")},d.error=function(t){t.status||"Success!"===t.reason||d.getBaiduDataFailed(!1)},d.showBaidu=function(e){var t=$(".condition_wrap label:first").attr("id"),a=$(".album_detail_wrap .album_detail_list").size(),i="undefined"==typeof dl_cdn_url?"//csdnimg.cn/release/download":dl_cdn_url,s=e.length,n='<div class="baiduWrap" style="text-align:center;padding:10px 0;line-height:14px;"><span>搜索结果部分由 </span><img src="'+i+'/images/Baidu_LOGO.png"  style="vertical-align: bottom;"><span> 提供</span></div>';if("intel"==t&&0<s){var r,o=$(".album_detail_wrap"),l="",c="";if(d.showData=function(t){return'<dl class="album_detail_list clearfix"><dt><a href="'+e[t].linkUrl+'" target="_blank"><img src="'+i+'/old_static/images/minetype/unkonw.svg" alt="img"></a></dt><dd><a href="'+e[t].linkUrl+'" class="album_detail_title" target="_blank">'+e[t].title+'</a><p class="cate_search_p">'+e[t].abstract+'</p><div class="album_detail_bot clearfix"><label><span>时间：</span><em>'+e[t].dispTime+"</em></label></div></dd></dl>"},5<s&&s<=10){for(r=0;r<5;r++)l+=d.showData(r);for(o.prepend(l),r=5;r<s;r++)c+=d.showData(r);5<a?$(".album_detail_wrap .album_detail_list:eq(9)").after(c):0<a&&a<=5?$(".album_detail_wrap .album_detail_list:eq("+(5+a-1)+")").after(c):0==a&&($(".album_detail_wrap .album_detail_list:eq(4)").after(c),$(".noSource").hide()),o.append(n)}else if(0<s&&s<=5){for(l="",r=0;r<s;r++)l+=d.showData(r);o.prepend(l),o.append(n)}}},d.baiduData=function(){(t=new BCse.Search("10742016945123576423")).setSearchRange(2,[d.configs.secDomain]),t.setPageNum(10),t.openHiLight(),t.getResult(d.configs.keywords,d.showBaidu)},window.dlObj=d}),void 0===window.csdn&&(window.csdn={}),csdn.afterCasInit=function(t,e){var a=$(".page_nav strong").html();csdn.baiduSearch(t,function(t){dlObj.showBaidu(t)},"download.csdn.net",a)},csdn.baiduSearchInstallError=function(){resultListAdInsert()},$(function(){$("#csdn_dl_commentbox li.stats i").on("click",function(){var t=$(this).index();$("#star").val(t+1),0==t?$(this).parent("li").hasClass("star_0")?$(this).parent("li").attr("class","stars"):$(this).parent("li").attr("class","stars star_0"):1==t?$(this).parent("li").attr("class","stars star_1"):2==t?$(this).parent("li").attr("class","stars star_2"):3==t?$(this).parent("li").attr("class","stars star_3"):4==t&&$(this).parent("li").attr("class","stars star_4")}),centerPop(),$("#cc_body").on("focus",function(){$(this).parents(".comm_b").addClass("comm_b_cur"),$(".comm_b_cur #cc_body").addClass("open")}),$(document).on("click",function(t){t.stopPropagation();var e=$(t.target);e.is("#cc_body")||e.is(".comm_btn")||e.is(".stars .fa")||$(".comm_btn").hasClass("grey_bg")||($(".comm_b").removeClass("comm_b_cur"),$(".comm_b #cc_body").removeClass("open"))}),$(document).delegate(".dl_reply_btn","click",function(t){$(this).closest(".comm_list_t").siblings(".comm_reply").slideDown(),t.stopPropagation()})}),$(function(){$(".csdn_dl_carouse1").hover(function(){$(this).find(".carousel-control").css("opacity",1),$(this).find(".carousel-control").css("filter","alpha(opacity=100)"),$(this).find(".full_screen_btn").show()},function(){$(this).find(".carousel-control").css("opacity",0),$(this).find(".carousel-control").css("filter","alpha(opacity=0)"),$(this).find(".full_screen_btn").hide()}),$(".full_screen_btn").on("click",function(){var t=$(this).parent(".csdn_dl_carouse1");$(t).hasClass("full_screen_box")?$(t).attr("class","csdn_dl_carouse1"):$(t).attr("class","csdn_dl_carouse1 full_screen_box")})}),$(function(){TabSwitch.init($(".J_tabSwitch")),$(".advance_filter").find(".filter_a").each(function(){$(this).click(function(){$(this).addClass("active").siblings().removeClass("active"),$(this).parent().next(".subSearch").show(),$(this).addClass("subShow").siblings().removeClass("subShow")})})}),$(function(){new function(t){if(!jQuery)return console.error("需要引用jquery");var n=this,l={tagBox:$("div.tag-box"),iptTags:$("#hidTags"),addBtn:$("#addTag"),splitStr:",",maxTagLen:5,funAfterEditor:null,funAfterDel:null,isEditorble:!0,quickNext:[13,188,229],maxLength:12};t&&$.extend(l,t),l.isEditorble&&l.tagBox.on("click","span.name",function(){$(this).prop("contenteditable",!0);var t=$(this);a(t)}),l.tagBox.on("keyup","span.name",function(e){if(e.stopPropagation(),void 0!==l.quickNext.find(function(t){return t==e.which})&&(13!==(e=e).which&&(this.innerText=this.innerText.substring(0,this.innerText.length-1)),$(this).trigger("focusout"),0<l.quickNext.length&&c())){var t=l.addTag("");a(t.find("span.name")),c()}}),l.tagBox.on("keydown","span.name",function(t){if(t.stopPropagation(),13===t.which)return!1});var c=function(){var t=!0;return 0<l.maxTagLen&&(t=l.tagBox.find("div.tag").length===l.maxTagLen?(l.addBtn.prop("disabled",!0),!1):(l.addBtn.prop("disabled",!1),!0)),t},d=function(){var a=l.tagBox.find("span.name"),i="",s=l.splitStr;a.text(function(t,e){e.length>l.maxLength&&(e=e.substring(0,l.maxLength)),$(a[t]).text(e),i+=(0<t?s:"")+e}),n.allTagsVal=i,l.iptTags.val(i)},a=function(t){var r=l.funAfterEditor,o=l.iptTags.val(),e=t;setTimeout(function(){e.focus(),e.one("focusout",function(){var t,e=$(this).text().trim(),a=o.split(","),i=0,s=!1;for(t=a.length;a[i]&&i<t;){if(a[i]===e||a[i].toUpperCase()===e.toUpperCase()){s=!0;break}i++}if(!e||s)if(e){var n=o.split(",").findIndex(function(t){return t===e});$(this).parent().index("div.tag")!==n&&$(this).parent().remove()}else $(this).parent().remove();else d(),$(this).prop("contenteditable",!1),r&&r($(this).parent("div.tag"),e);c()})},100)};l.addTag=function(t){var e=$('<div class="tag"><span class="name" '+(t?"":'contenteditable="true"')+'></span><i class="icon-guanbi"><svg class="common_icon " aria-hidden="true"><use xlink:href="#csdnc-times"></use></svg></i></div>');return e.find("span.name").text(t),l.addBtn.before(e),e},l.addBtn.click(function(){var t=l.addTag("");a(t.find("span.name"))}),l.tagBox.on("click",".icon-guanbi",function(t){var e,a;e=$(this).parent(),a=e.find("span.name").text(),e.remove(),d(),c(),l.funAfterDel&&l.funAfterDel(a),t.stopPropagation()}),n.allTagsVal="",n.loadTags=function(t){if(t)for(var e=t.split(l.splitStr),a=0;a<e.length;a++){var i=l.addTag(e[a]);c(),n.allTagsVal=t,l.funAfterEditor&&l.funAfterEditor(i,e[a])}},n.addTag=function(t){if(c()){var e=l.addTag(t);return d(),l.funAfterEditor&&l.funAfterEditor(e,t),c(),e}return!1}}({tagBox:$("#TagBox"),iptTags:$("#hidTags"),addBtn:$("#addTag"),maxTagLen:5,isEditorble:!0,maxLength:6})}),$(function(){}),$(function(){var r,o,l,c,d;TabSwitch.init($(".J_tabSwitch")),o=r=4,l=10,c=$(".tab2_con").find(".album_detail_wrap"),(d=$(".tab3_con").find(".album_detail_wrap")).length&&window.addEventListener("scroll",throttle(function(){var a,i,s,t=$(window).scrollTop(),e=$(window).height(),n=$(document).height();n-20<=t+e&&($(".tab2_con").is(":hidden")||(s="",$.ajax({type:"get",url:"/index.php/source/ajax_get_more_latest",data:{pageno:r,pagesize:l},dataType:"json",success:function(t){if(t){for(var e in $("#get_more_latest").remove(),t)s+='<dl class="album_detail_list clearfix"><dt><a target="_blank" href="/download/'+t[e].username+"/"+t[e].id+'"><img src="'+t[e].image+'" alt="img"></a></dt><dd><a target="_blank" href="/download/'+t[e].username+"/"+t[e].id+'" class="album_detail_title">'+t[e].title+'</a><div class="album_detail_bot clearfix"><label><span>上传者：</span><em class="upl_name">'+t[e].nickname+'</em></label><label><span>上传时间：</span><em class="upl_time">'+t[e].pubdate+'</em></label><strong><span class="jifen">积分/C币：</span><em>'+t[e].sourcescore+"</em></strong></div></dd></dl>";c.append(s),r++,c.append('<div id="get_more_latest"  class="get_more_btn"><img src="'+dl_cdn_url+'/images/feedLoading.gif"/></div>')}else $("#get_more_latest").remove(),c.append('<div id="get_more_latest" class="get_more_btn get_more_center" >我们是很有底线的</div>')}})),$(".tab3_con").is(":hidden")||(a="",i=$("#is_login").val(),$.ajax({type:"get",url:"/index.php/source/ajax_get_more_code",data:{pageno:o,pagesize:l},dataType:"json",success:function(t){if(t){for(var e in $("#get_more_code").remove(),t)a+="false"==i?'<dl class="album_detail_list clearfix"><dt><a target="_blank" href="/download/'+t[e].username+"/"+t[e].id+'"><img src="'+t[e].image+'" alt="img"></a></dt><dd><a target="_blank" href="/download/'+t[e].username+"/"+t[e].id+'" class="album_detail_title">'+t[e].title+'</a><div class="album_detail_bot clearfix"><label><span>上传者：</span><em class="upl_name">'+t[e].nickname+'</em></label><label><span>上传时间：</span><em class="upl_time">'+t[e].pubdate+"</em></label></div></dd></dl>":'<dl class="album_detail_list clearfix"><dt><a target="_blank" href="/download/'+t[e].username+"/"+t[e].id+'"><img src="'+t[e].image+'" alt="img"></a></dt><dd><a target="_blank" href="/download/'+t[e].username+"/"+t[e].id+'" class="album_detail_title">'+t[e].title+'</a><div class="album_detail_bot clearfix"><label><span>上传者：</span><em class="upl_name">'+t[e].nickname+'</em></label><label><span>上传时间：</span><em class="upl_time">'+t[e].pubdate+'</em></label><strong><span class="jifen">积分/C币：</span><em>'+t[e].sourcescore+"</em></strong></div></dd></dl>";d.append(a),o++,d.append('<div id="get_more_code" class="get_more_btn" ><img src="'+dl_cdn_url+'/images/feedLoading.gif"/></div>')}else $("#get_more_code").remove(),d.append('<div id="get_more_code" class="get_more_btn get_more_center" >我们是很有底线的</div>')}})))},200,1e3))}),function(m){var a=function(t){var e=this;this.caroursel=t,this.posterList=t.find(".poster-list"),this.posterItems=t.find(".poster-item"),this.firstPosterItem=this.posterItems.first(),this.lastPosterItem=this.posterItems.last(),this.prevBtn=this.caroursel.find(".poster-prev-btn"),this.nextBtn=this.caroursel.find(".poster-next-btn"),this.setting={width:"1170",height:"470",posterWidth:"500",posterHeight:"270",scale:"0.5",speed:"2000",isAutoplay:"true",dealy:"1000"},m.extend(this.setting,this.getSetting()),this.setFirstPosition(),this.setSlicePosition(),this.rotateFlag=!0,this.prevBtn.bind("click",function(){e.rotateFlag&&(e.rotateFlag=!1,e.rotateAnimate("left"))}),this.nextBtn.bind("click",function(){e.rotateFlag&&(e.rotateFlag=!1,e.rotateAnimate("right"))}),this.setting.isAutoplay&&(this.autoPlay(),this.caroursel.hover(function(){clearInterval(e.timer)},function(){e.autoPlay()}))};a.prototype={autoPlay:function(){var t=this;this.timer=window.setInterval(function(){t.nextBtn.click()},t.setting.dealy)},rotateAnimate:function(t){var l=this,c=[];"right"==t&&(this.posterItems.each(function(){var t=m(this),e=m(this).next().get(0)?m(this).next():l.firstPosterItem,a=e.css("width"),i=e.css("height"),s=e.css("zIndex"),n=e.css("opacity"),r=e.css("left"),o=e.css("top");c.push(s),t.animate({width:a,height:i,left:r,opacity:n,top:o},l.setting.speed,function(){l.rotateFlag=!0}),1==parseInt(e.css("opacity"))?(t.find(".poster_b").css("opacity",1),t.find(".poster_b img").css("display","block")):(t.find(".poster_b").css("opacity",0),t.find(".poster_b img").css("display","none"))}),this.posterItems.each(function(t){m(this).css("zIndex",c[t])})),"left"==t&&(this.posterItems.each(function(){var t=m(this),e=m(this).prev().get(0)?m(this).prev():l.lastPosterItem,a=e.css("width"),i=e.css("height"),s=e.css("zIndex"),n=e.css("opacity"),r=e.css("left"),o=e.css("top");c.push(s),t.animate({width:a,height:i,left:r,opacity:n,top:o},l.setting.speed,function(){l.rotateFlag=!0}),1==parseInt(e.css("opacity"))?(t.find(".poster_b").css("opacity",1),t.find(".poster_b img").css("display","block")):(t.find(".poster_b").css("opacity",0),t.find(".poster_b img").css("display","none"))}),this.posterItems.each(function(t){m(this).css("zIndex",c[t])}))},setFirstPosition:function(){this.caroursel.css({width:this.setting.width,height:this.setting.height}),this.posterList.css({width:this.setting.width,height:this.setting.height});var t=(this.setting.width-this.setting.posterWidth)/2;this.prevBtn.css({width:t,height:this.setting.height,zIndex:Math.ceil(this.posterItems.size()/2)}),this.nextBtn.css({width:t,height:this.setting.height,zIndex:Math.ceil(this.posterItems.size()/2)}),this.firstPosterItem.css({width:this.setting.posterWidth,height:this.setting.posterHeight,left:t,zIndex:Math.ceil(this.posterItems.size()/2),top:this.setVertialType(this.setting.posterHeight)})},setSlicePosition:function(){var s=this,t=this.posterItems.slice(1),e=Math.floor(this.posterItems.length/2),a=t.slice(0,e),i=t.slice(e),n=this.setting.posterWidth,r=this.setting.posterHeight,o=(this.setting.width-this.setting.posterWidth)/2,l=o/e,c=this.setting.width,d=1,u=n,h=r,p=e;a.each(function(t,e){u=n*s.setting.scale,h=r*s.setting.scale,m(this).css({width:u,height:h,left:o-d*l,zIndex:p--,opacity:1/(d+2),top:s.setVertialType(h)}),d++});var g=e,f=1;i.each(function(t,e){var a=n*s.setting.scale,i=r*s.setting.scale;m(this).css({width:a,height:i,left:c-(o-g*l+a),zIndex:f++,opacity:1/(g+2),top:s.setVertialType(i)}),g--})},getSetting:function(){var t=this.caroursel.attr("data-setting");return 0<t.length?m.parseJSON(t):{}},setVertialType:function(t){var e=this.setting.algin;return"top"==e?0:"middle"==e?(this.setting.posterHeight-t)/2:"bottom"==e?this.setting.posterHeight-t:(this.setting.posterHeight-t)/2}},a.init=function(t){t.each(function(t,e){new a(m(this))})},window.Caroursel=a}(jQuery),$(function(){var t={show:function(t){$(t).show(),$("#dlMask").show()},hide:function(t){$(t).hide(),$("#dlMask").hide()},myResource:function(){var t=$(".my_edit"),e=$(".my_soldOut"),a=$(".my_del"),i=this;t.each(function(){$(this).on("click",function(){i.show("#my_edit")})}),e.each(function(){$(this).on("click",function(){i.show("#sold_out")})}),a.each(function(){$(this).on("click",function(){i.show("#my_del")})}),$(".my_close,.my_cancel,.my_pop_edit").on("click",function(){i.hide(".my_pop")})},vipBuy:function(){$(".edu_vip").hover(function(){$(this).addClass("vip_cur").siblings().removeClass("vip_cur")})}};t.myResource(),t.vipBuy()}),function($){var TabSwitch=function(tabNav){var self=this;this.tabNav=tabNav,this.tabItem=tabNav.find(".tab_item"),this.tabLayer=tabNav.find(".tab_page"),this.curTab=null,this.curLayer=null,this.initTab(),this.tabItem.each(function(i){$(this).click(function(){return self.switchTab(this,i),self.tabNav.attr("data-trigger")&&"true"==self.tabNav.attr("data-trigger")?self.tabNav.attr("data-call")&&""!=self.tabNav.attr("data-call")&&eval(self.tabNav.attr("data-call")):self.tabNav.attr("data-trigger","true"),!1})})};TabSwitch.prototype={initTab:function(){var e=this;this.tabItem.each(function(t){$(this).hasClass("cur")?(e.curTab=$(this),e.curLayer=$(e.tabLayer.get(t))):$(e.tabLayer.get(t)).hide()})},switchTab:function(t,e){var a=this,i=$(t),s=$(a.tabLayer.get(e));a.curTab&&(a.curTab.removeClass("cur"),a.curLayer.hide()),i.addClass("cur"),$("#more_info_a").attr("href",i.attr("data-href")),s.show(),a.curTab=i,a.curLayer=s}},TabSwitch.init=function(t){var e=this;t.each(function(){new e($(this))})},window.TabSwitch=TabSwitch}(jQuery),$(function(){({uploadImg:function(){var t=this;$("#albumform").ajaxForm(),$("input[name=imagesrc]").bind("change",function(){t.PreviewImage(this,"#imgView","#albumform")})},PreviewImage:function(t,e,a){var i="jpg,gif,png",s=t.value.substring(t.value.lastIndexOf(".")+1).toLowerCase(),n=(window.navigator.userAgent.toUpperCase(),$(e));-1<i.indexOf(s)?$(a).ajaxSubmit({url:"/index.php/sources_album/getalbumimg",data:{imagesrc:t.value},dataType:"json",success:function(t){0!==t.succ?n.attr("src",t.url):alert(t.errmsg)},error:function(t){}}):(alert("仅支持"+i+"为后缀名的文件!"),t.value="")}}).uploadImg()});